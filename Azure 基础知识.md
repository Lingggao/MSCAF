# Azure 基础知识

> 整 理 | **Ling Gao (高楷修)**  
> 身 份 | **Microsoft 微软全球学生大使**  
> 日 期 | **2020 年 9 月 8 日**  

## 一、云概念 - 云计算的原则

:one: ​用户可以通过云计算服务**租用其他公司计算机上的存储空间或 CPU 周期等资源**。

:two: ​云提供商主要提供以下**四种服务**：

1. **计算能力**
	- 虚拟机
	- 容器
	- 无服务器计算

3. **存储**
	- 结构化
	- 半结构化
	- 非结构化

4. **网络**
5. **分析**

:three: ​云计算的**七大优势**：

1. **经济高效**：即用即付、随时停止、基于使用量进行付费、便于预测成本。
2. **可缩放**：可以根据需求自由的增减使用的资源与服务。
	- 垂直扩展（纵向扩展）：添加资源以增强现有服务器功能 [例如添加更多的 CPU 与内存]。
	- 水平扩展（横向扩展）：添加更多的服务器共同工作。

4. **有弹性**：在需求变化时可以自动增减资源进行补偿。
5. **保持最新**：消除 IT 负担，更新与维护工作由云提供商负责。
6. **可靠**：数据备份、灾难恢复、数据复制、容错、遍布全球各地的数据中心。
7. **安全**：物理安全性、数字安全性。
7. **确保合规**：帮助企业遵守所在地相关的法规和标准。

:four: 支出的**两种投资方式**：

1. **资本支出 (CapEx)**：预先将资金花在实体基础设施上、前期成本 [本地数据中心]。
	- 服务器成本：硬件与支持成本 [容错、冗余、集群、电源]。
	- 存储成本：硬件与支持成本。
	- 网络成本：硬件成本 [电缆、交换机、路由器、广域网、Internet 连接]。
	- 备份成本：备份、维护成本。
	- 灾难恢复成本：灾难恢复站点成本 [备用发电机、基础设施建设]。
	- 基建成本：建筑成本 [电力、面积、冷却]。
	- 技术人员成本：雇佣技术专家和工作人员。
	- **优点**：可以在项目初期规划成本与预测费用。
	- **缺点**：需求和增长可能无法预测，并且可能超出预期。

2. **运营支出 (OpEx)**：预先将资金花在付费购买服务或产品上、无前期成本 [租用云计算服务]。
	- 租用软件：用户主动管理订阅、提供资源后开始计费、不使用时取消资源。
	- 根据使用需求增减费用：可以通过分配的 RAM、每秒 I/O 操作数 (IOPS) 等方式计费。
	- 按照用量付费。
	- **优点**：云服务具有敏捷性，便于动态管理成本，随着需求的变化优化支出。

:five: 云计算的**三种部署方法​**：

1. **公有云**：用户无需管理本地硬件，所有内容全部在云提供商的硬件上运行。
	- 优点：高伸缩性，高敏捷性，即用即付，无需更新维护硬件，无需掌握专业知识。
	- 缺点：无法满足特定的安全与业务需求、政府政策、行业标准、法律要求，无法自由管理硬件。

2. **私有云**：用户全权负责购买与维护硬件和软件，在自己的数据中心创建云环境以模拟公有云。
	- 优点：可以支持任何场景，方便控制安全性，可以满足严格的合规性与法律要求。
	- 缺点：存在初始 CapEx 成本，需要自行购买硬件，敏捷性极低，需要专业知识。

3. **混合云**：结合公有云与私有云 [例如企业在公有云中托管网站，并将其链接到托管在私有云（或本地数据中心）中的高度安全的数据库]。部分内容出于法律或版本老旧等原因无法放入云中的话，也可以使用混合云。
	- 优点：可以确保稳定运行、拥有极高的灵活性。
	- 缺点：部署昂贵、管理复杂。

:six: 云计算的**三个类别**：​

1. **基础结构即服务 (IaaS)**：用户在最大程度上控制硬件，与云提供商共同承担管理责任。
	- 迁移工作负载：IaaS 设施的管理方式与本地基础结构类似。
	- 测试和开发：更加实惠。
	- 存储、备份和恢复：IaaS 对于管理无法预测的需求和稳定增长的存储需求非常有用。

2. **平台即服务 (PaaS)**：用户无需管理底层基础结构，例如无需自行安装操作系统或 Web 服务器等。
	- 开发框架：Paas 提供了用于开发基于云的应用程序的框架。
	- 商业智能：PaaS 提供了用于分析和挖掘数据的工具。

3. **软件即服务 (SaaS)**：用户只需使用软件即可，不需要对软件的任何维护或管理工作负责 [Microsoft 365]。

![5-layer-diagram](https://github.com/Lingggao/MSCAF/blob/master/5-layer-diagram.png?raw=true)

## 二、创建 Azure 帐户

:one: Azure 订阅是用于在 Azure 中预置资源的逻辑容器。创建 Azure 资源时，需要确定其所属的订阅。

:two: 每个账户可以根据需求创建**多个** Azure 订阅。

:three: Azure 根据使用情况**每月**计费一次。

## 三、核心云服务 - Azure 简介

:one: 全球财富 500 强企业中，有超过 450 个企业 (> 90%) 将业务放在 Microsoft 云上运行。​

:two: Azure 是 Microsoft 的云计算平台，是一系列持续扩展的云服务，可帮助组织迎接当前和未来的业务挑战。Azure 提供超过 100 种服务，分为以下**十类**：

1. **计算**
2. **网络**
3. **存储**
4. **移动**
5. **数据库**
6. **Web**
7. **物联网**
8. **大数据**
9. **人工智能**
10. **DevOps**

![3-azure-services](https://github.com/Lingggao/MSCAF/blob/master/3-azure-services.png?raw=true)

## 四、核心云服务 - Azure 体系结构和服务保证

:one: Microsoft Azure 提供**可靠、冗余、高能效**的基础结构：

1. 实现**全球覆盖**。
2. 获得**本地影响力**。
3. 确保**数据安全**与**符合法律**。
4. 减少**碳排放量**。

:two: Microsoft Azure 由遍布全球的数据中心组成，在创建资源或使用服务时会使用其中一个或多个位置的物理设备。Azure 会将数据中心归入不同的**区域**。

:three: ​**区域**：是指地球上的某个地理区域，包含至少一个（或多个）数据中心，这些数据中心彼此相邻并通过一个低延迟的网络相互连接。Azure 智能地分配和控制每个区域内的资源，以确保适当平衡工作负载。

1. 美国西部。
2. 加拿大中部。
3. 西欧。
4. 中国东部。
5. *等*

![2-regions-small](https://github.com/Lingggao/MSCAF/blob/master/2-regions-small.png?raw=true)

:four: **地域**：Azure 将世界划分为由**地缘政治边界或国家/地区边界**定义的多个地域。每个地域代表一个独立市场，通常包含两个或多个**区域**。每个区域只属于某一个地域。

1. 美洲
2. 欧洲
3. 亚太区
4. 中东和非洲

:five: **可用性区域**：指的是 Azure **区域**中的物理上独立的数据中心，Azure 可以通过可用性区域帮助实现应用的高可用性。每个可用性区域都由一个或多个数据中心组成，这些数据中心都配置了独立的电源、冷却和网络设备。如果一个区域出现故障，其他区域会继续正常工作。并非每个区域都支持可用性区域。

![4-availability-zones](https://github.com/Lingggao/MSCAF/blob/master/4-availability-zones.png?raw=true)

:six: **区域对**：在同一**地域**内，每个 Azure 区域始终与至少距其 **300 英里外**的另一区域配对。区域对是直接相连的，并且距离足够远，能够与区域性灾难相隔离，因此可以使用它们来提供可靠的服务和数据冗余。区域对有助于减少因**自然灾害、社会动乱、电力中断或物理网络中断**等事件造成服务中断的可能性。

![5-region-pairs](https://github.com/Lingggao/MSCAF/blob/master/5-region-pairs.png?raw=true)

:seven: **服务级别协议 (SLA)** 描述了 Microsoft 为 Azure 客户定义了适用于 Azure 的特定性能标准。每个 Azure 产品和服务都有相对应的 SLA。SLA 有**三个主要特征**：

1. **性能目标**：SLA 定义了 Azure 产品或服务的性能目标，通常以**运行时间保证**或连接速率表示。
2. **运行时间和连接性保证**：SLA 为每个产品或服务规定了从 99.9% 到 99.999% 的性能目标承诺。

| SLA %  | 每周停机时间 | 每月停机时间 | 每年停机时间 |
| :----: | :----------: | :----------: | :----------: |
|   99   |  1.68 小时   |   7.2 小时   |   3.65 天    |
|  99.9  |  10.1 分钟   |  43.2 分钟   |  8.76 小时   |
| 99.95  |    5 分钟    |  21.6 分钟   |  4.38 小时   |
| 99.99  |  1.01 分钟   |  4.32 分钟   |  52.56 分钟  |
| 99.999 |     6 秒     |   25.9 秒    |  5.26 分钟   |

3. **服务信用额度**：当 Azure 产品或服务无法履行其适用 SLA 的规范时，Microsoft 将进行相应的**补偿**。

## 五、核心云服务 - 使用 Azure 门户管理服务

:one: 用于日常管理 Azure 与交互的工具包括：

1. **Azure 门户**：通过图形用户界面 (GUI) 与 Azure 交互。
2. **Azure PowerShell 与 Azure 命令行接口 (CLI)**：进行基于命令行和自动化的交互。
3. **Azure Cloud Shell**：基于 Web 的命令行接口。
4. **Azure 移动应用**：监视和管理移动设备上的资源。

:two: Azure 仪表板存储为 **JSON** 文件，支持上传和下载以与 Azure 目录的其他成员共享。

## 六、核心云服务 - Azure 计算选项

:one: Azure 计算是一种按需计算服务，用于运行基于云的应用程序。

:two: 在 Azure 中执行计算的**四种常用技术**：

1. **虚拟机**：物理计算机的软件模拟。用户可以像使用物理计算机一样安装和运行软件。
2. **容器**：用于运行应用程序的虚拟化环境，容器不包含在其内部运行的应用的操作系统。
3. **Azure 应用服务**：平台即服务 (PaaS) 产品，为托管面向 Web 的企业级应用程序而设计。
4. **无服务器计算**：可运行代码，但是将基础托管环境完全抽象化。

---

:three: **Azure 虚拟机 (VM)** 以虚拟服务器的形式提供基础结构即服务 (IaaS)。就像物理计算机一样，可以自定义在 VM 上运行的所有软件。用户无需购买和维护运行 VM 的物理硬件，但是仍需对 VM 自身进行维护。

:four: 有如下需求时，**虚拟机**是理想的选择：

1. 需要完全控制操作系统 (OS)。
2. 需要运行自定义软件。
3. 需要使用自定义托管配置。

:five: 用于缩放 Azure 虚拟机的**三种功能**：

1. **可用性集**：两个或多个 VM 的逻辑分组，这些 VM 帮助确保应用程序在计划内或计划外维护期间可用。
2. **虚拟机规模集**：创建并管理一组完全相同的、负载均衡的 VM。
3. **Azure Batch**：使大规模作业计划和计算管理能够扩展到数十、数百或数千个 VM。

---

:six: **容器**用于在单个主机上运行应用程序的多个实例。容器是修改后的运行时环境，基于执行应用程序的主机操作系统生成。容器不使用虚拟化，因此它不会浪费使用冗余操作系统模拟虚拟硬件的资源。容器是受保护且隔离的，不需要为每个应用提供单独的服务器。

- **优点**：节约资源、响应快速、可以在单个主机上运行多个应用程序。

:seven: Azure 支持 **Docker 容器**（一种标准化容器模型）。

:eight: 管理 Azure 容器的**两种方法**：

1. **Azure 容器实例 (ACI)**：PaaS 服务、快速简单、用户无需管理任何虚拟机或配置其他服务。
2. **Azure Kubernetes 服务 (AKS)**：面向自动化和管理大量容器的完整业务流程服务。

:nine: 容器通常用于使用**微服务**体系结构创建解决方案。微服务指的是将解决方案拆分为各个较小的独立部分 [例如可以将网站拆分为三个容器，第一个用于托管前端，第二个用于托管后端，第三个用于存储]。

---

:one::zero: **Azure 应用服务**：采用所选编程语言生成和托管 Web 应用、后台作业、移动后端以及 RESTful API，而无需管理基础结构 (平台即服务 Paas)。**优点**：自动缩放、高可用性。

:one::one: 使用 Azure 应用服务可托管常见**四种应用服务**：

1. **Web 应用**：全面支持 ASP.NET、ASP.NET Core、Java、Ruby、Node.js、PHP 或 Python 托管 Web 应用，可选 Windows 或 Linux 作为主机操作系统。
2. **API 应用**：使用自己选择的语言和框架生成基于 REST 的 Web API。
3. **Web 作业**：在与 Web 应用、API 应用或移动设备相同的上下文中运行程序或脚本。
4. **移动应用**：快速生成适用于 iOS 和 Android 应用的后端。

---

:one::two: **无服务器计算**是对服务器、基础结构和操作系统的抽象。Azure 负责管理服务器架构以及资源分配，用户无需负责基础结构，只需为使用的确切资源付费。

:one::three: ​无服务器计算的**三个重点**：

1. **服务器抽象**：对运行的服务器进行抽象，用户只需部署代码。
2. **事件驱动缩放**：适合响应传入事件，可以通过计时器、HTTP、队列进行触发。
3. **微额账单**：用户只需为代码运行的时间进行付费。

:one::four: ​Azure 中无服务器计算的**两种实现方式**：

1. **Azure 函数**：只关心运行服务的代码，不关心基础平台或基础结构。
2. **Azure 逻辑应用**：逻辑应用执行从预定义逻辑块构建的工作流，旨在自动完成业务方案。

## 七、核心云服务 - Azure 数据存储选项

:one: Azure 数据存储的**七大优势**：​

1. **自动备份恢复**：降低数据丢失风险。
2. **全球范围复制**：可在全球多个位置复制数据，防止出现特殊事件。
3. **数据分析**：支持对数据使用情况进行分析。
4. **加密**：确保数据安全、控制访问人员。
5. **多种类型**：几乎可以存储任何类型的数据。
6. **虚拟磁盘**：可以存储最高 32 TB 的数据。
7. **存储层**：根据使用频率确定数据访问的优先级。

:two: **三种主要**的数据类型：​

1. **结构化数据**：具有相同的字段或属性、遵循某种架构的数据，可以存储在数据表中。
2. **半结构化数据**：使用 “标记” 或 “键” 并为数据提供层次结构，也称为非关系数据或 NoSQL 数据。
3. **非结构化数据**：不包含指定的结构 [例如文档、图片与视频数据]。

:three: Azure 中的**七种存储选项**：​

1. **Azure SQL 数据库**：基于 Microsoft SQL Server 数据库引擎的关系数据库即服务 (DaaS)。
2. **Azure Cosmos DB**：全球分布式数据库服务。支持无架构数据，支持不断变化的数据。
3. **Azure Blob 存储**：存储非结构化数据。也用来存储备份、灾难恢复及存档的数据。
4. **Azure Data Lake Storage**：大型存储库，可存储结构化和非结构化数据。
5. **Azure 文件存储**：用于在全球任意位置共享文件、诊断数据或应用程序数据。
6. **Azure 队列**：存储大量消息，用于实现更好的持续性。
7. **磁盘存储**：为虚拟机、应用程序和其他服务提供磁盘，如果本地方案一样。

:four: **三个存储层**：

1. **热存储层**：存储用户经常访问的数据，并且进行特殊的优化。
2. **冷存储层**：存储用户不常访问的时间至少为 30 天的数据，并且进行优化。
3. **存档存储层**：存储用户极少访问的时间至少为 180 天并且不对延迟进行严格要求的数据。

## 八、核心云服务 - Azure 网络选项

:one: **N 层体系结构（松散耦合系统）**：将应用程序分成**逻辑层**和**物理层**。较高层级可以从较低层级访问服务，较低层级绝对无法访问较高层级。传统的三层应用程序有表示层、中间层和数据库层。 

:two: **虚拟网络**：指的是 Azure 中逻辑隔离的网络。虚拟网络可分割为一个或多个**子网**。Azure 为用户管理物理硬件，用户可以借助软件配置虚拟网络和网关，与处理自己的网络的操作方式基本相同。

:three: **网络安全组 (NSG)**：云级防火墙，可以允许或拒绝流向 Azure 资源的入站网络流量。

:four: **负载均衡器**：在池中的每个系统之间平均分配流量，可实现在不中断服务的情况下运行维护任务。

![3-azure-load-balancer](https://github.com/Lingggao/MSCAF/blob/master/3-azure-load-balancer.png?raw=true)

:five: **Azure 应用程序网关**：专为 Web 应用程序设计的负载均衡器，在传输级别 (TCP) 工作。

:six: **内容分发网络 (CDN)**：高效地向用户分发 Web 内容的分布式服务器网络。

:seven: **Azure 流量管理器**：使用最邻近用户的 DNS 服务器将用户流量定向到全球分布的终结点。

![4-traffic-manager](https://github.com/Lingggao/MSCAF/blob/master/4-traffic-manager.png?raw=true)

## 九、Azure 中的安全、责任和信任

:one: 云安全是一项共同的责任。

:two: **安全分层方法**：深层防御策略采用一系列机制减缓攻击进展，这些攻击旨在获取对信息的未经授权访问。深层防御可以形象化为一系列同心环，数据被保护在中心。每个环在数据周围添加一层安全性。此方法消除了对任何单一保护层的依赖，并且可以减缓攻击并提供可自动或手动操作的警报遥测。

1. **物理安全性**
    - 第一道防线，以物理方式控制对数据中心内计算硬件的访问 [安保、围墙、员工培训]。
2. **标识和访问**
    - 控制对基础结构的访问权限。
    - 单一登录、多重身份认证。
    - 审核事件。
3. **外围**
    - 分布式拒绝服务 (DDoS) 保护。
    - 外围防火墙保护。
4. **网络**
    - 限制资源之间的通信权限。
    - 默认拒绝。
    - 限制入站与出站访问。
    - 安全连接本地网络。
5. **计算**
    - 安全访问虚拟机。
    - 保护终结点，修复系统，保持最新。
6. **应用程序**
    - 确保应用程序安全且没有任何漏洞。
    - 将敏感的应用程序机密存储在安全的存储介质中。
    - 将安全性包含在所有应用程序开发的设计要求中。
7. **数据**

![defense_in_depth_layers_small](https://github.com/Lingggao/MSCAF/blob/master/defense_in_depth_layers_small.png?raw=true)

:three: **Azure 安全中心**：一项针对 Azure 中和本地的所有服务提供威胁防护的监视服务。

:four: **身份验证 (AuthN)** 是确定要访问资源的个人或服务的标识的过程。**授权 (AuthZ)** 是确定经过身份验证的人员或服务具有的访问级别的过程。用户可以通过 **Azure Active Directory** (Azure AD) 管理身份验证和授权。

:five: **Azure Active Directory** (Azure AD)：基于云的标识服务。管理员和开发人员可以使用 Azure AD 中配置的集中式规则和策略来控制对内部和外部数据及应用程序的访问。

:six: Azure AD 提供以下**六种服务**：

1. **身份验证**：自助密码重置、多重身份验证 (MFA)、自定义禁止密码列表、智能锁定服务。
2. **单一登录 (SSO)**：用户只需记住一个 ID 和密码即可访问多个应用程序。
3. **应用程序管理**：Azure AD 应用程序代理、SSO、“我的应用” 门户、SaaS 应用。
4. **企业对企业 (B2B) 标识服务**：管理来宾用户和外部合作伙伴。
5. **企业对客户 (B2C) 标识服务**：管理用户注册、登录及管理其配置文件的方式。
6. **设备管理**：管理云设备或本地设备访问企业数据的方式。

:seven: 顶级**加密**类型分为以下两种：​

1. **对称加密**：使用相同的密钥来加密和解密数据。
2. **非对称加密**：使用公钥和私钥对。任意一个密钥都可以加密数据，但无法解密，需要使用配对密钥解密。

:eight: 加密的**两种实现方式**：​

1. **静态加密**：存储在物理介质上的数据。
2. **传输中加密**：主动从一个位置移动到另一个位置的数据 [例如通过 Internet 移动]。

:nine: ​在 Azure 中加密数据的**四种方法**：

1. **Azure 存储服务加密**：先自动加密数据，然后将其保存到 Azure 中。
2. **Azure 磁盘加密**：加密 Windows 和 Linux IaaS 虚拟机磁盘。
3. **透明数据加密 (TDE)**：保护 Azure SQL 数据库和 Azure 数据仓库免受恶意活动的威胁。
4. **Azure Key Vault**：用于存储应用程序机密的集中式云服务。
    - 机密管理：存储令牌、密码、证书、应用程序访问接口 (API) 密钥。
    - 密钥管理。
    - 证书管理。
    - 存储硬件安全模块 (HSM) 支持的机密。

:one::zero: Azure 中的**两种主要证书**：

1. **服务证书**：实现与云服务间的安全通信。
2. **管理证书**：使用经典部署模型进行身份验证。
3. 可以使用 Azure Key Vault 管理证书。

:one::one: 在外围提供入站保护的**三种选择**：

1. **Azure 防火墙**：基于云的网络安全服务，可保护 Azure 虚拟网络资源。
2. **Azure 应用程序网关**：包含 Web 应用程序防火墙 (WAF) 的负载均衡器，可抵御网站中常见的已知漏洞。
3. **网络虚拟设备 (NVA)**：类似于硬件防火墙设备。

:one::two: **Microsoft Azure 信息保护**（有时称为 AIP）是一种基于云的解决方案，可帮助组织通过应用标签来对文档和电子邮件进行分类和选择性保护。

:one::three: **Azure 高级威胁防护** (Azure ATP) 是一种基于云的安全解决方案，可识别、检测并帮助调查针对组织的高级威胁、泄露的标识和恶意内部操作。

## 十、使用 Azure Policy 应用和监视基础结构标准

:one: **Azure Policy 是一种用于创建、分配和管理策略的 Azure 服务**。这些策略将在整个资源中强制实施不同的规则和效果，以便这些资源符合公司标准和服务级别协议。Azure Policy 通过评估资源是否符合指定策略来满足此需求。例如，可设置一项策略，仅允许环境中有特定大小的虚拟机。实施此策略后，将评估新资源和现有资源的符合性。通过使用正确的策略类型，可以确保现有资源的符合性。

:two: 应用策略的**三个步骤**：

1. 创建**策略定义**。
2. 将定义分配给资源作用域。
3. 查看策略评估结果。

:three: 常见的**五种策略定义**：​

1. **允许的存储帐户 SKU**：确定正在部署的存储帐户是否在 SKU 大小集内，拒绝所有不符合的账户。
2. **允许的资源类型**：指定组织可以部署的资源类型，拒绝所有不符合的资源。
3. **允许的位置**：限制组织在部署资源时可指定的位置，强制执行地理合规性要求。
4. **允许的虚拟机 SKU**：指定组织可部署的一组 VM SKU。
5. **不允许的资源类型**：禁止部署一系列资源类型。

:four: 策略定义本身以 **JSON** 文件的形式表示。

:five: **计划**是一组**策略**的合集。可与 Azure Policy 中的策略配合使用，帮助用户跟踪更大目标的合规性状态。

:six: **Azure 管理组**是一些容器，用于跨多个 Azure 订阅管理访问权限、策略和符合性。管理组允许将 Azure 资源在集合中按层次结构排序，从而提供高于订阅级别的更高级别的分类。管理组中的所有订阅都将自动继承应用于管理组的条件。不管使用什么类型的订阅，管理组都能提供大规模的企业级管理。

![4-management-groups-tree](https://github.com/Lingggao/MSCAF/blob/master/4-management-groups-tree.png?raw=true)

:seven: **Azure 蓝图**：是一种声明性方法，用于协调各个资源模板和其他项目的部署：

1. 角色分配
2. 策略分配
3. Azure 资源管理器模板
4. 资源组

:eight: **蓝图与 Azure Policy 策略的区别**：**蓝图**是一个包或容器，用于组合与 Azure 云服务、安全性和设计的实现相关的一组针对目标的标准、模式和要求，这些标准、模式和要求可以重复使用以确保一致性和合规性。**策略**是默认允许和显式拒绝系统，侧重于部署期间的资源属性，用于现有资源。 它会验证订阅中的资源是否符合要求和标准，以此为云治理提供支持。策略可作为众多项目中的一项包含在蓝图定义中。

:nine: Microsoft 实现服务合规性完全透明化的**四个来源**：

1. **Microsoft 隐私声明**：解释 Microsoft 处理哪些个人数据，以及将这些数据以及用于何种目的。
2. **Microsoft 信任中心**：为法律和合规性社区提供支持和资源。
3. **服务信任门户**：发布与 Microsoft 云服务相关的审核报告和其他合规性相关信息的站点。
4. **合规性管理器**：基于工作流的风险评估仪表板，用于跟踪、分配和验证相关的法规遵从性活动。

:one::zero: ​Azure 中用于监视服务与资源运行情况的**两个服务**：

1. **Azure Monitor**：用于收集、分析和处理来自云与本地环境的遥测数据的综合解决方案。
    - 可从各种源收集数据。
    - 可在资源设置下启用诊断。
    - 可以针对应用程序及其可能依赖的其他资源提供有用的见解。
    - 可以主动响应警报条件。
    - 以可视化方式监视数据。
    - 可以与其他服务集成。
2. **Azure 服务运行状况**：在用户受到 Azure 服务问题的影响时提供个性化指导和支持。
    - **Azure 状态**：提供 Azure 服务运行状况的全局视图。
    - **服务运行状况**：提供仪表板，用于跟踪 Azure 服务在使用区域中的状态。
    - **资源运行状况**：有助于在 Azure 服务问题影响资源时进行诊断和获取支持。

:one::one: **基于角色的访问控制 (RBAC)** 为 Azure 资源提供精细的访问管理，可授予用户执行工作所需的特定权限。

## 十一、使用 Azure 资源管理器控制和组织 Azure 资源

:one: **Azure 资源管理器**提供了大量可用于组织资源、强制执行标准和防止意外删除关键 Azure 资源的功能。

:two: **资源组**是部署在 Azure 上的资源的逻辑容器。这些资源是在 Azure 订阅中创建的任何内容，例如虚拟机、应用程序网关和 CosmosDB 实例。所有资源必须在资源组中，并且资源只能是单个资源组的成员。

:three: **标记**是可以应用于资源和资源组的文本数据的 名称 / 值 对。并非所有资源都支持标记。

:four: **RBAC 最佳做法**：

1. 在团队中实现职责分离，仅向用户授予执行作业所需的访问权限。
2. 在规划访问控制策略时，为用户授予他们完成工作所需的最低权限级别。
3. 使用 “资源锁” 以确保不会修改或删除关键资源。

:five: **资源锁**：一种可应用于任何资源以阻止修改或删除的设置。

1. **删除**：允许对资源执行所有操作，但会阻止删除资源。
2. **只读**：只允许对资源执行读取活动，阻止对资源进行任何修改或删除。

## 十二、预测成本和优化 Azure 的支出

:one: **Azure 定价计算器**：基于 Web 的免费工具，用于计算每项服务的成本和完整估算的总成本。

:two: **Azure 顾问**：提供有关高可用性、安全性、性能、卓越运营和成本的建议。

:three: **Azure 成本管理**：用于更深入了解云资金的流向。

:four: **Azure 总拥有成本 (TCO) 计算器**：用于预测成本节省。

:five: 降低基础结构成本的**九种方案**：

1. **使用 Azure 额度**。
2. **使用支出限制**。
3. **使用预留实例**。
4. **选择低成本位置和区域**。
5. **研究可用的成本节省产品 / 服务**。
6. **合理调整未充分利用的虚拟机的大小**。
7. **在非工作时间解除分配虚拟机**。
8. **删除未使用的虚拟机**。
9. **迁移到 PaaS 或 SaaS 服务**。